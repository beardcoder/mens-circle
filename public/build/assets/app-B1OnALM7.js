var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));function l(){let e=document.getElementById(`navToggle`),t=document.getElementById(`nav`);if(!e||!t)return;let n={isOpen:!1,scrollPosition:0},r=t=>{e.setAttribute(`aria-expanded`,String(t)),e.setAttribute(`aria-label`,t?`Menü schließen`:`Menü öffnen`)},i=()=>{n.scrollPosition=window.scrollY,n.isOpen=!0,t.classList.add(`open`),e.classList.add(`active`),document.body.classList.add(`nav-open`),document.body.style.top=`-${n.scrollPosition}px`,r(!0)},a=(i={})=>{n.isOpen&&(n.isOpen=!1,t.classList.remove(`open`),e.classList.remove(`active`),document.body.classList.remove(`nav-open`),document.body.style.top=``,(i.restoreScroll??!0)&&window.scrollTo({top:n.scrollPosition,left:0,behavior:`instant`}),r(!1))};e.addEventListener(`click`,()=>{n.isOpen?a():i()}),t.querySelectorAll(`.nav__link, .nav__cta`).forEach(e=>{e.addEventListener(`click`,()=>{n.isOpen&&a({restoreScroll:!1})})}),document.addEventListener(`click`,r=>{n.isOpen&&!t.contains(r.target)&&!e.contains(r.target)&&a()}),document.addEventListener(`keydown`,e=>{e.key===`Escape`&&n.isOpen&&a()})}function u(){let e=document.getElementById(`header`);if(!e)return;let t=!!document.querySelector(`.hero`);document.body.classList.toggle(`has-hero`,t),document.body.classList.toggle(`no-hero`,!t);let n=()=>{let n=window.scrollY>50||!t;e.classList.toggle(`scrolled`,n)};if(n(),window.addEventListener(`scroll`,n,{passive:!0}),t){let t=document.querySelector(`.hero`);if(!t)return;new IntersectionObserver(t=>{t.forEach(t=>{e.classList.toggle(`header--on-hero`,t.isIntersecting&&t.intersectionRatio>.15)})},{threshold:[0,.15,.35,.5],rootMargin:`-10% 0px 0px 0px`}).observe(t)}}function d(){let e=document.getElementById(`scrollToTop`);if(!e)return;let t=()=>{e.classList.toggle(`visible`,window.scrollY>400)};t(),window.addEventListener(`scroll`,t,{passive:!0}),e.addEventListener(`click`,()=>{window.scrollTo({top:0,behavior:`smooth`})})}function f(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function p(e,t){let n=e.querySelector(`[type="submit"]`),r=n?.textContent??``;e.addEventListener(`submit`,async i=>{i.preventDefault(),n&&(n.disabled=!0,n.textContent=`Wird gesendet...`);let a=new FormData(e);try{let n=await(await t.onSubmit(a)).json();n.success?(e.reset(),t.onSuccess?.(n),m(`success`,n.message)):(t.onError?.(Error(n.message)),m(`error`,n.message))}catch(e){t.onError?.(e),m(`error`,`Ein Fehler ist aufgetreten. Bitte versuche es erneut.`)}finally{n&&(n.disabled=!1,n.textContent=r)}})}function m(e,t,n){let r=`toast--visible`,i={success:`✓`,error:`✕`,info:`i`,warning:`!`},a={success:`Erfolg`,error:`Fehler`,info:`Information`,warning:`Warnung`},o=document.createElement(`div`);o.className=`toast toast--${e}`,o.setAttribute(`role`,`alert`),o.setAttribute(`aria-live`,`polite`);let s=document.createElement(`div`);s.className=`toast__icon`,s.textContent=i[e],s.setAttribute(`aria-hidden`,`true`);let c=document.createElement(`div`);c.className=`toast__content`;let l=document.createElement(`div`);l.className=`toast__title`,l.textContent=n??a[e];let u=document.createElement(`div`);u.className=`toast__message`,u.textContent=t,c.appendChild(l),c.appendChild(u),o.appendChild(s),o.appendChild(c),document.body.appendChild(o),requestAnimationFrame(()=>{o.classList.add(r)});let d=()=>{o.isConnected&&o.remove()};window.setTimeout(()=>{o.classList.remove(r),o.classList.add(`toast--hiding`),o.addEventListener(`transitionend`,d,{once:!0}),window.setTimeout(d,400)},5e3)}function h(e,t){if(window.umami!==void 0)try{window.umami.track(e,t)}catch{}}const g={NEWSLETTER_SUBMIT:`newsletter-submit`,NEWSLETTER_SUCCESS:`newsletter-success`,NEWSLETTER_ERROR:`newsletter-error`,NEWSLETTER_ABANDON_FILLED:`newsletter-abandon-filled`,EVENT_REGISTRATION_SUBMIT:`event-registration-submit`,EVENT_REGISTRATION_SUCCESS:`event-registration-success`,EVENT_REGISTRATION_ERROR:`event-registration-error`,EVENT_REGISTRATION_ABANDON_FILLED:`event-registration-abandon-filled`,TESTIMONIAL_SUBMIT:`testimonial-submit`,TESTIMONIAL_SUCCESS:`testimonial-success`,TESTIMONIAL_ERROR:`testimonial-error`,TESTIMONIAL_ABANDON_FILLED:`testimonial-abandon-filled`,CALENDAR_OPEN:`calendar-open`,CALENDAR_DOWNLOAD_ICS:`calendar-download-ics`,CALENDAR_DOWNLOAD_GOOGLE:`calendar-download-google`,CTA_CLICK:`cta-click`,SOCIAL_CLICK:`social-click`,WHATSAPP_CLICK:`whatsapp-click`,EXTERNAL_LINK:`external-link`,CLICK:`click`,FAQ_EXPAND:`faq-expand`,SCROLL_DEPTH:`scroll-depth`,TIME_ON_PAGE:`time-on-page`,USER_IDLE:`user-idle`,USER_ACTIVE:`user-active`,PAGE_EXIT:`page-exit`,SECTION_VISIBLE:`section-visible`,NAV_CLICK:`nav-click`,FOOTER_LINK:`footer-link`,CONTACT_CLICK:`contact-click`};function _(e){return Array.from(e.querySelectorAll(`input, textarea, select`)).filter(e=>!(!e.name||e.disabled||e instanceof HTMLInputElement&&e.type===`hidden`))}function v(e){return e instanceof HTMLInputElement?e.type===`checkbox`||e.type===`radio`?e.checked:e.value.trim().length>0:(e instanceof HTMLSelectElement,e.value.trim().length>0)}function y(e){return e.required?e instanceof HTMLInputElement?e.type===`checkbox`||e.type===`radio`?e.checked&&e.validity.valid:e.value.trim().length>0&&e.validity.valid:(e instanceof HTMLSelectElement,e.value.trim().length>0&&e.validity.valid):!0}function b(e){let t=_(e),n=t.filter(e=>e.required),r=t.filter(e=>v(e)).length;return{requiredFilled:n.filter(e=>y(e)).length,requiredTotal:n.length,filledFields:r,totalFields:t.length}}function x(e,t,n){let r=!1,i=!1,a=null,o=()=>{a===null&&(a=Date.now())},s=()=>{r=!0},c=()=>{if(i||r||a===null)return;let o=b(e);if(o.requiredTotal===0||o.requiredFilled<o.requiredTotal)return;i=!0;let s=Math.round(o.requiredFilled/o.requiredTotal*100),c=Math.round((Date.now()-a)/1e3);h(t,{form:n,required_filled:o.requiredFilled,required_total:o.requiredTotal,required_completion_pct:s,filled_fields:o.filledFields,total_fields:o.totalFields,seconds_since_first_input:c,page:window.location.pathname})};e.addEventListener(`input`,o),e.addEventListener(`change`,o),e.addEventListener(`submit`,s,{capture:!0}),window.addEventListener(`pagehide`,c,{capture:!0}),window.addEventListener(`beforeunload`,c,{capture:!0})}function S(){let e=document.getElementById(`newsletterForm`);e&&(x(e,g.NEWSLETTER_ABANDON_FILLED,`newsletter`),p(e,{onSubmit:async e=>{let t=e.get(`email`);if(!f(t))throw Error(`Bitte gib eine gültige E-Mail-Adresse ein.`);return h(g.NEWSLETTER_SUBMIT),fetch(window.routes.newsletter,{method:`POST`,headers:{"Content-Type":`application/json`,"X-CSRF-TOKEN":window.routes.csrfToken,Accept:`application/json`},body:JSON.stringify({email:t})})},onSuccess:()=>{h(g.NEWSLETTER_SUCCESS)},onError:e=>{h(g.NEWSLETTER_ERROR,{error:e.message})}}))}function C(){let e=document.getElementById(`registrationForm`);e&&(x(e,g.EVENT_REGISTRATION_ABANDON_FILLED,`event-registration`),p(e,{onSubmit:async t=>{let n=t.get(`first_name`)?.trim(),r=t.get(`last_name`)?.trim(),i=t.get(`email`)?.trim(),a=t.get(`phone_number`)?.trim()||null,o=e.querySelector(`input[name="privacy"]`)?.checked,s=t.get(`event_id`);if(!n||!r)throw Error(`Bitte fülle alle Pflichtfelder aus.`);if(!f(i))throw Error(`Bitte gib eine gültige E-Mail-Adresse ein.`);if(!o)throw Error(`Bitte bestätige die Datenschutzerklärung.`);return h(g.EVENT_REGISTRATION_SUBMIT,{event_id:s,has_phone:a?`yes`:`no`}),fetch(window.routes.eventRegister,{method:`POST`,headers:{"Content-Type":`application/json`,"X-CSRF-TOKEN":window.routes.csrfToken,Accept:`application/json`},body:JSON.stringify({event_id:s,first_name:n,last_name:r,email:i,phone_number:a,privacy:o?1:0})})},onSuccess:()=>{h(g.EVENT_REGISTRATION_SUCCESS)},onError:e=>{h(g.EVENT_REGISTRATION_ERROR,{error:e.message})}}))}function w(){let e=document.getElementById(`testimonialForm`);if(!e)return;x(e,g.TESTIMONIAL_ABANDON_FILLED,`testimonial`);let t=e.querySelector(`#quote`),n=document.getElementById(`charCount`);t&&n&&t.addEventListener(`input`,()=>{n.textContent=String(t.value.length)});let r=e.dataset.submitUrl??``;p(e,{onSubmit:async t=>{let n=t.get(`quote`)?.trim(),i=t.get(`author_name`)?.trim()||null,a=t.get(`role`)?.trim()||null,o=t.get(`email`)?.trim(),s=e.querySelector(`input[name="privacy"]`)?.checked;if(!n||n.length<10)throw Error(`Bitte teile deine Erfahrung mit uns (mindestens 10 Zeichen).`);if(!f(o))throw Error(`Bitte gib eine gültige E-Mail-Adresse ein.`);if(!s)throw Error(`Bitte bestätige die Datenschutzerklärung.`);return h(g.TESTIMONIAL_SUBMIT,{has_name:i?`yes`:`no`,has_role:a?`yes`:`no`,char_count:n.length}),fetch(r,{method:`POST`,headers:{"Content-Type":`application/json`,"X-CSRF-TOKEN":window.routes.csrfToken,Accept:`application/json`},body:JSON.stringify({quote:n,author_name:i,role:a,email:o,privacy:s?1:0})})},onSuccess:()=>{n&&(n.textContent=`0`),h(g.TESTIMONIAL_SUCCESS)},onError:e=>{h(g.TESTIMONIAL_ERROR,{error:e.message})}})}function T(){let e=document.getElementById(`addToCalendar`),t=document.getElementById(`calendarModal`),n=document.getElementById(`calendarICS`),r=document.getElementById(`calendarGoogle`);if(!e)return;let i=window.eventData??{title:`Männerkreis Niederbayern/ Straubing`,description:`Treffen des Männerkreis Niederbayern/ Straubing. Ein Raum für echte Begegnung unter Männern.`,location:`Straubing (genaue Adresse nach Anmeldung)`,startDate:`2025-01-24`,startTime:`19:00`,endDate:`2025-01-24`,endTime:`21:30`};if(n){let e=D(i),t=new Blob([e],{type:`text/calendar;charset=utf-8`});n.href=URL.createObjectURL(t)}r&&(r.href=O(i)),e.addEventListener(`click`,()=>{t&&(h(g.CALENDAR_OPEN,{event:i.title}),t.classList.add(`open`))}),n?.addEventListener(`click`,()=>{h(g.CALENDAR_DOWNLOAD_ICS,{event:i.title})}),r?.addEventListener(`click`,()=>{h(g.CALENDAR_DOWNLOAD_GOOGLE,{event:i.title})}),t?.addEventListener(`click`,e=>{e.target===t&&t.classList.remove(`open`)})}function E(e,t){return new Date(`${e}T${t}:00`).toISOString().replace(/[-:]/g,``).replace(/\.\d{3}/,``)}function D(e){return`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Männerkreis Niederbayern/ Straubing//DE
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
DTSTART:${E(e.startDate,e.startTime)}
DTEND:${E(e.endDate,e.endTime)}
DTSTAMP:${E(new Date().toISOString().slice(0,10),new Date().toISOString().slice(11,16))}
UID:${Date.now()}@maennerkreis-straubing.de
SUMMARY:${e.title}
DESCRIPTION:${e.description.replace(/\n/g,`\\n`)}
LOCATION:${e.location}
STATUS:CONFIRMED
END:VEVENT
END:VCALENDAR`}function O(e){let t=(e,t)=>`${e.replace(/-/g,``)}T${t.replace(`:`,``)}00`;return`https://calendar.google.com/calendar/render?${new URLSearchParams({action:`TEMPLATE`,text:e.title,dates:`${t(e.startDate,e.startTime)}/${t(e.endDate,e.endTime)}`,details:e.description,location:e.location,ctz:`Europe/Berlin`}).toString()}`}var k=c(o(((e,t)=>{(function(n,r){typeof e==`object`&&t!==void 0?t.exports=r():typeof define==`function`&&define.amd?define(r):(n||=self,n.scrollama=r())})(e,(function(){function e(e,t=document){return typeof e==`string`?Array.from(t.querySelectorAll(e)):e instanceof Element?[e]:e instanceof NodeList?Array.from(e):e instanceof Array?e:[]}function t(e){let t=document.createElement(`div`);t.className=`scrollama__debug-step ${e}`,t.style.position=`fixed`,t.style.left=`0`,t.style.width=`100%`,t.style.zIndex=`9999`,t.style.borderTop=`2px solid black`,t.style.borderBottom=`2px solid black`;let n=document.createElement(`p`);return n.style.position=`absolute`,n.style.left=`0`,n.style.height=`1px`,n.style.width=`100%`,n.style.borderTop=`1px dashed black`,t.appendChild(n),document.body.appendChild(t),t}function n({id:e,step:n,marginTop:r}){let{index:i,height:a}=n,o=`scrollama__debug-step--${e}-${i}`,s=document.querySelector(`.${o}`);s||=t(o),s.style.top=`${r*-1}px`,s.style.height=`${a}px`,s.querySelector(`p`).style.top=`${a/2}px`}function r(){let e=Date.now(),t=[];for(let e=0;e<6;e+=1){let e=`abcdefghijklmnopqrstuvwxyz`[Math.floor(Math.random()*26)];t.push(e)}return`${t.join(``)}${e}`}function i(e){console.error(`scrollama error: ${e}`)}function a(e){return+e.getAttribute(`data-scrollama-index`)}function o(e,t){let n=Math.ceil(e/t),r=[],i=1/n;for(let e=0;e<n+1;e+=1)r.push(e*i);return r}function s(e){if(typeof e==`string`&&e.indexOf(`px`)>0){let t=+e.replace(`px`,``);return isNaN(t)?(err(`offset value must be in 'px' format. Fallback to 0.5.`),{format:`percent`,value:.5}):{format:`pixels`,value:t}}else if(typeof e==`number`||!isNaN(+e))return e>1&&err(`offset value is greater than 1. Fallback to 1.`),e<0&&err(`offset value is lower than 0. Fallback to 0.`),{format:`percent`,value:Math.min(Math.max(0,e),1)};return null}function c(e){e.forEach(e=>e.node.setAttribute(`data-scrollama-index`,e.index))}function l(e){let{top:t}=e.getBoundingClientRect(),n=window.pageYOffset,r=document.body.clientTop||0;return t+n-r}let u,d,f;function p(e){let t=e?e.scrollTop:window.pageYOffset;u!==t&&(u=t,u>d?f=`down`:u<d&&(f=`up`),d=u)}function m(e){u=0,d=0,document.addEventListener(`scroll`,()=>p(e))}function h(){let t={},u=r(),d=[],h,g,_,v=0,y=!1,b=!1,x=!1,S=!1,C=[];function w(){t={stepEnter:()=>{},stepExit:()=>{},stepProgress:()=>{}},C=[]}function T(e){e&&!y&&B(),!e&&y&&N(),y=e}function E(e,n){let r=a(e),i=d[r];n!==void 0&&(i.progress=n);let o={element:e,index:r,progress:n,direction:f};i.state===`enter`&&t.stepProgress(o)}function D(e,n=!0){let r=a(e),i=d[r],o={element:e,index:r,direction:f};i.direction=f,i.state=`enter`,C[r]||t.stepEnter(o),S&&(C[r]=!0)}function O(e,n=!0){let r=a(e),i=d[r];if(!i.state)return!1;let o={element:e,index:r,direction:f};b&&(f===`down`&&i.progress<1?E(e,1):f===`up`&&i.progress>0&&E(e,0)),i.direction=f,i.state=`exit`,t.stepExit(o)}function k([e]){let t=a(e.target),n=d[t],r=e.target.offsetHeight;r!==n.height&&(n.height=r,M(n),I(n),P(n))}function A([e]){p(g);let{isIntersecting:t,target:n}=e;t?D(n):O(n)}function j([e]){let t=a(e.target),n=d[t],{isIntersecting:r,intersectionRatio:i,target:o}=e;r&&n.state===`enter`&&E(o,i)}function M({observers:e}){Object.keys(e).map(t=>{e[t].disconnect()})}function N(){d.forEach(M)}function P(e){let t=new ResizeObserver(k);t.observe(e.node),e.observers.resize=t}function F(){d.forEach(P)}function I(e){let t=window.innerHeight,r=e.offset||h,i=r.format===`pixels`?1:t,a=r.value*i,o=e.height/2-a,s=e.height/2-(t-a),c={rootMargin:`${o}px 0px ${s}px 0px`,threshold:.5,root:_},l=new IntersectionObserver(A,c);l.observe(e.node),e.observers.step=l,x&&n({id:u,step:e,marginTop:o,marginBottom:s})}function L(){d.forEach(I)}function R(e){let t=window.innerHeight,n=e.offset||h,r=n.format===`pixels`?1:t,i=n.value*r,a={rootMargin:`${-i+e.height}px 0px ${i-t}px 0px`,threshold:o(e.height,v)},s=new IntersectionObserver(j,a);s.observe(e.node),e.observers.progress=s}function z(){d.forEach(R)}function B(){N(),F(),L(),b&&z()}let V={};return V.setup=({step:t,parent:n,offset:r=.5,threshold:a=4,progress:o=!1,once:u=!1,debug:f=!1,container:p=void 0,root:y=null})=>(m(p),d=e(t,n).map((e,t)=>({index:t,direction:void 0,height:e.offsetHeight,node:e,observers:{},offset:s(e.dataset.offset),top:l(e),progress:0,state:void 0})),d.length?(b=o,S=u,x=f,v=Math.max(1,+a),h=s(r),g=p,_=y,w(),c(d),T(!0),V):(i(`no step elements`),V)),V.enable=()=>(T(!0),V),V.disable=()=>(T(!1),V),V.destroy=()=>(T(!1),w(),V),V.resize=()=>(B(),V),V.offset=e=>e==null?h.value:(h=s(e),B(),V),V.onStepEnter=e=>(typeof e==`function`?t.stepEnter=e:i(`onStepEnter requires a function`),V),V.onStepExit=e=>(typeof e==`function`?t.stepExit=e:i(`onStepExit requires a function`),V),V.onStepProgress=e=>(typeof e==`function`?t.stepProgress=e:i(`onStepProgress requires a function`),V),V}return h}))}))(),1),A=600,j=100,M=`cubic-bezier(0.16, 1, 0.3, 1)`;function N(e){return{from:{opacity:0,transform:{default:`translateY(30px)`,up:`translateY(30px)`,down:`translateY(-30px)`,left:`translateX(-30px)`,right:`translateX(30px)`,scale:`scale(0.95)`}[e]},to:{opacity:1,transform:`translateY(0) translateX(0) scale(1)`}}}function P(e){return e.classList.contains(`fade-in-up`)?`up`:e.classList.contains(`fade-in-down`)?`down`:e.classList.contains(`fade-in-left`)?`left`:e.classList.contains(`fade-in-right`)?`right`:e.classList.contains(`fade-in-scale`)?`scale`:`default`}function F(e){for(let t=1;t<=5;t++)if(e.classList.contains(`fade-in-delay-${t}`)||e.classList.contains(`delay-${t}`))return t*j;return 0}function I(e,t){let{to:n}=N(P(e));e.animate([{},{opacity:n.opacity,transform:n.transform}],{duration:A,delay:t,easing:M,fill:`forwards`})}function L(e){let{from:t}=N(P(e));e.style.opacity=String(t.opacity),e.style.transform=t.transform}function R(){if(window.matchMedia(`(prefers-reduced-motion: reduce)`).matches)return;let e=document.querySelectorAll(`.fade-in, .fade-in-up, .fade-in-down, .fade-in-left, .fade-in-right, .fade-in-scale`),t=document.querySelectorAll(`.stagger-children`);if(!(e.length===0&&t.length===0)){if(e.forEach(e=>{e.closest(`.stagger-children`)||L(e)}),t.forEach(e=>{let t=e.children;for(let e=0;e<t.length;e++){let n=t[e];n.style.opacity=`0`,n.style.transform=`translateY(20px)`}}),e.length>0){let t=Array.from(e).filter(e=>!e.closest(`.stagger-children`));t.length>0&&(0,k.default)().setup({step:t,offset:.8,once:!0}).onStepEnter(({element:e})=>{I(e,F(e))})}t.length>0&&(0,k.default)().setup({step:Array.from(t),offset:.8,once:!0}).onStepEnter(({element:e})=>{let t=e.children;for(let e=0;e<t.length;e++)t[e].animate([{},{opacity:1,transform:`translateY(0)`}],{duration:A,delay:e*j,easing:M,fill:`forwards`})})}}var z=[`ueber`,`reise`,`faq`,`newsletter`];function B(){let e=z.map(e=>document.getElementById(e)).filter(Boolean);if(e.length===0)return;let t=document.querySelectorAll(`.nav__link[href*="#"]`);if(t.length===0)return;let n=e=>{t.forEach(t=>{let n=t.getAttribute(`href`)??``,r=e!==null&&n.endsWith(`#${e}`);t.classList.toggle(`nav__link--active`,r)})};(0,k.default)().setup({step:e,offset:.4}).onStepEnter(({element:e})=>{n(e.id)}).onStepExit(({element:t,direction:r})=>{r===`up`&&t.id===e[0]?.id&&n(null)})}function V(){if(window.matchMedia(`(prefers-reduced-motion: reduce)`).matches)return;let e=document.querySelectorAll(`.journey__step`);e.length!==0&&(e.forEach(e=>{let t=e.querySelector(`.journey__step-number`);t&&(t.style.transition=`opacity 0.4s ease-out, transform 0.4s ease-out`,t.style.opacity=`0.08`,t.style.transform=`scale(0.9)`)}),(0,k.default)().setup({step:Array.from(e),offset:.6,once:!0}).onStepEnter(({element:e})=>{let t=e.querySelector(`.journey__step-number`);t&&(t.style.opacity=`0.25`,t.style.transform=`scale(1)`),e.classList.add(`journey__step--active`)}))}var H=class{constructor(e={}){this.scrollDebounceTimer=null,this.heartbeatTimer=null,this.idleTimer=null,this.visibilityObserver=null,this.seenVisibleElements=new WeakSet,this.pageExitTracked=!1,this.initialized=!1,this.maxUmamiWaitAttempts=80,this.handleScroll=()=>{this.scrollDebounceTimer!==null&&window.clearTimeout(this.scrollDebounceTimer),this.scrollDebounceTimer=window.setTimeout(()=>{this.checkScrollDepth()},this.options.scrollDebounceMs)},this.handleActivity=()=>{let e=Date.now();if(this.state.isIdle){let t=Math.max(1,Math.round((e-this.state.lastActivityAt)/1e3));this.state.isIdle=!1,h(g.USER_ACTIVE,{idle_duration_seconds:t,page:window.location.pathname})}this.state.lastActivityAt=e},this.handleClick=e=>{if(!(e.target instanceof Element))return;if(this.options.autoTrackClicks){let t=e.target.closest(this.options.clickSelector);t&&h(t.dataset.umamiTrack??g.CLICK,this.collectElementData(t))}let t=e.target.closest(`a[href]`);!t||!this.isExternalLink(t.href)||t.hasAttribute(`data-umami-event`)||h(g.EXTERNAL_LINK,{...this.collectElementData(t),url:t.href,text:(t.textContent??``).trim().slice(0,80),page:window.location.pathname})},this.handlePageHide=()=>{this.trackPageExit()},this.handleBeforeUnload=()=>{this.trackPageExit()},this.options={scrollDepthThresholds:[25,50,75,90,100],scrollDebounceMs:120,heartbeatIntervalMs:3e4,idleTimeoutMs:6e4,autoTrackClicks:!1,clickSelector:`[data-umami-track]`,visibilityThreshold:.5,visibilitySelector:`section[id]`,debug:!1,...e},this.state={startTime:Date.now(),lastActivityAt:Date.now(),isIdle:!1,trackedScrollDepths:new Set,visibleElementsCount:0}}init(){this.initialized||(this.initialized=!0,this.waitForUmami(()=>{this.setupScrollTracking(),this.setupTimeTracking(),this.setupIdleTracking(),this.setupClickTracking(),this.setupVisibilityTracking(),this.setupPageExitTracking(),this.log(`Initialized`)}))}destroy(){this.scrollDebounceTimer!==null&&(window.clearTimeout(this.scrollDebounceTimer),this.scrollDebounceTimer=null),this.heartbeatTimer!==null&&(window.clearInterval(this.heartbeatTimer),this.heartbeatTimer=null),this.idleTimer!==null&&(window.clearInterval(this.idleTimer),this.idleTimer=null),this.visibilityObserver&&=(this.visibilityObserver.disconnect(),null),window.removeEventListener(`scroll`,this.handleScroll,{capture:!1}),document.removeEventListener(`click`,this.handleClick,{capture:!1}),window.removeEventListener(`pagehide`,this.handlePageHide,{capture:!0}),window.removeEventListener(`beforeunload`,this.handleBeforeUnload,{capture:!0}),[`mousedown`,`mousemove`,`keydown`,`scroll`,`touchstart`,`click`].forEach(e=>{document.removeEventListener(e,this.handleActivity,{capture:!1})})}getStats(){return{timeOnPageSeconds:this.getTimeOnPageSeconds(),maxScrollDepth:Math.max(0,...Array.from(this.state.trackedScrollDepths)),scrollDepthsReached:Array.from(this.state.trackedScrollDepths).sort((e,t)=>e-t),isIdle:this.state.isIdle,visibleElementsCount:this.state.visibleElementsCount}}waitForUmami(e,t=0){if(typeof window.umami?.track==`function`){e();return}if(t>=this.maxUmamiWaitAttempts){this.log(`Umami script not detected in time, continuing and tracking when available`),e();return}window.setTimeout(()=>this.waitForUmami(e,t+1),100)}log(...e){this.options.debug}setupScrollTracking(){window.addEventListener(`scroll`,this.handleScroll,{passive:!0}),this.checkScrollDepth()}checkScrollDepth(){let e=document.documentElement.scrollHeight-window.innerHeight;if(e<=0)return;let t=Math.min(100,Math.round(window.scrollY/e*100));this.options.scrollDepthThresholds.forEach(e=>{t>=e&&!this.state.trackedScrollDepths.has(e)&&(this.state.trackedScrollDepths.add(e),h(g.SCROLL_DEPTH,{depth:e,percentage:`${e}%`,pixels:Math.round(window.scrollY),page:window.location.pathname}))})}setupTimeTracking(){this.heartbeatTimer=window.setInterval(()=>{if(this.state.isIdle)return;let e=this.getTimeOnPageSeconds();h(g.TIME_ON_PAGE,{seconds:e,minutes:Math.round(e/60),page:window.location.pathname})},this.options.heartbeatIntervalMs)}setupIdleTracking(){[`mousedown`,`mousemove`,`keydown`,`scroll`,`touchstart`,`click`].forEach(e=>{document.addEventListener(e,this.handleActivity,{passive:!0})}),this.idleTimer=window.setInterval(()=>{this.state.isIdle||Date.now()-this.state.lastActivityAt<this.options.idleTimeoutMs||(this.state.isIdle=!0,h(g.USER_IDLE,{active_before_idle_seconds:Math.round(this.options.idleTimeoutMs/1e3),page:window.location.pathname}))},3e4)}setupClickTracking(){document.addEventListener(`click`,this.handleClick,{passive:!0})}setupVisibilityTracking(){if(!(`IntersectionObserver`in window))return;let e=document.querySelectorAll(this.options.visibilitySelector);e.length!==0&&(this.visibilityObserver=new IntersectionObserver(e=>{e.forEach(e=>{if(!e.isIntersecting)return;let t=e.target;this.seenVisibleElements.has(t)||(this.seenVisibleElements.add(t),this.state.visibleElementsCount+=1,h(t.dataset.umamiVisible??g.SECTION_VISIBLE,{...this.collectElementData(t),element_id:t.id||`unknown`,visibility_ratio:Math.round(e.intersectionRatio*100),page:window.location.pathname}))})},{threshold:this.options.visibilityThreshold}),e.forEach(e=>{this.visibilityObserver?.observe(e)}))}setupPageExitTracking(){window.addEventListener(`pagehide`,this.handlePageHide,{capture:!0}),window.addEventListener(`beforeunload`,this.handleBeforeUnload,{capture:!0})}trackPageExit(){if(this.pageExitTracked)return;this.pageExitTracked=!0;let e=Array.from(this.state.trackedScrollDepths);h(g.PAGE_EXIT,{total_time_seconds:this.getTimeOnPageSeconds(),max_scroll_depth:Math.max(0,...e),scroll_depth_count:e.length,page:window.location.pathname})}collectElementData(e){let t={};Object.entries(e.dataset).forEach(([e,n])=>{if(!e.startsWith(`umamiData`)||!n)return;let r=e.slice(9);if(!r)return;let i=r.charAt(0).toLowerCase()+r.slice(1);t[i]=n}),t.element=e.tagName.toLowerCase(),e.id&&(t.element_id=e.id),e.className&&(t.element_classes=String(e.className).slice(0,120));let n=(e.textContent??``).trim();return n&&(t.text=n.slice(0,80)),e instanceof HTMLAnchorElement&&e.href&&(t.href=e.href),t}isExternalLink(e){try{return new URL(e,window.location.origin).hostname!==window.location.hostname}catch{return!1}}getTimeOnPageSeconds(){return Math.max(1,Math.round((Date.now()-this.state.startTime)/1e3))}};function U(e={}){let t=new H(e);return t.init(),window.umamiTracker=t,t}document.addEventListener(`DOMContentLoaded`,()=>{l(),u(),d(),R(),B(),V(),S(),C(),w(),T(),U()});