function e(){let e=document.getElementById(`navToggle`),t=document.getElementById(`nav`);if(!e||!t)return;let n={isOpen:!1,scrollPosition:0},r=t=>{e.setAttribute(`aria-expanded`,String(t)),e.setAttribute(`aria-label`,t?`Menü schließen`:`Menü öffnen`)},i=()=>{n.scrollPosition=window.scrollY,n.isOpen=!0,t.classList.add(`open`),e.classList.add(`active`),document.body.classList.add(`nav-open`),document.body.style.top=`-${n.scrollPosition}px`,r(!0)},a=()=>{n.isOpen=!1,t.classList.remove(`open`),e.classList.remove(`active`),document.body.classList.remove(`nav-open`),document.body.style.top=``,window.scrollTo({top:n.scrollPosition,left:0,behavior:`instant`}),r(!1)};e.addEventListener(`click`,()=>{n.isOpen?a():i()}),t.querySelectorAll(`.nav__link, .nav__cta`).forEach(e=>{e.addEventListener(`click`,()=>a())}),document.addEventListener(`click`,r=>{n.isOpen&&!t.contains(r.target)&&!e.contains(r.target)&&a()}),document.addEventListener(`keydown`,e=>{e.key===`Escape`&&n.isOpen&&a()})}function t(){let e=document.getElementById(`header`);if(!e)return;let t=!!document.querySelector(`.hero`);document.body.classList.toggle(`has-hero`,t),document.body.classList.toggle(`no-hero`,!t);let n=()=>{let n=window.scrollY>50||!t;e.classList.toggle(`scrolled`,n)};if(n(),window.addEventListener(`scroll`,n,{passive:!0}),t){let t=document.querySelector(`.hero`);if(!t)return;new IntersectionObserver(t=>{t.forEach(t=>{e.classList.toggle(`header--on-hero`,t.isIntersecting&&t.intersectionRatio>.15)})},{threshold:[0,.15,.35,.5],rootMargin:`-10% 0px 0px 0px`}).observe(t)}}function n(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function r(e,t){let n=e.querySelector(`[type="submit"]`),r=n?.textContent??``;e.addEventListener(`submit`,async a=>{a.preventDefault(),n&&(n.disabled=!0,n.textContent=`Wird gesendet...`);let o=new FormData(e);try{let n=await(await t.onSubmit(o)).json();n.success?(e.reset(),t.onSuccess?.(n),i(`success`,n.message)):(t.onError?.(Error(n.message)),i(`error`,n.message))}catch(e){t.onError?.(e),i(`error`,`Ein Fehler ist aufgetreten. Bitte versuche es erneut.`)}finally{n&&(n.disabled=!1,n.textContent=r)}})}function i(e,t,n){let r=`toast--visible`,i={success:`✓`,error:`✕`,info:`i`,warning:`!`},a={success:`Erfolg`,error:`Fehler`,info:`Information`,warning:`Warnung`},o=document.createElement(`div`);o.className=`toast toast--${e}`,o.setAttribute(`role`,`alert`),o.setAttribute(`aria-live`,`polite`);let s=document.createElement(`div`);s.className=`toast__icon`,s.textContent=i[e],s.setAttribute(`aria-hidden`,`true`);let c=document.createElement(`div`);c.className=`toast__content`;let l=document.createElement(`div`);l.className=`toast__title`,l.textContent=n??a[e];let u=document.createElement(`div`);u.className=`toast__message`,u.textContent=t,c.appendChild(l),c.appendChild(u),o.appendChild(s),o.appendChild(c),document.body.appendChild(o),requestAnimationFrame(()=>{o.classList.add(r)});let d=()=>{o.isConnected&&o.remove()};window.setTimeout(()=>{o.classList.remove(r),o.classList.add(`toast--hiding`),o.addEventListener(`transitionend`,d,{once:!0}),window.setTimeout(d,400)},5e3)}function a(e,t){if(window.umami!==void 0)try{window.umami.track(e,t)}catch{}}const o={NEWSLETTER_SUBMIT:`newsletter-submit`,NEWSLETTER_SUCCESS:`newsletter-success`,NEWSLETTER_ERROR:`newsletter-error`,EVENT_REGISTRATION_SUBMIT:`event-registration-submit`,EVENT_REGISTRATION_SUCCESS:`event-registration-success`,EVENT_REGISTRATION_ERROR:`event-registration-error`,TESTIMONIAL_SUBMIT:`testimonial-submit`,TESTIMONIAL_SUCCESS:`testimonial-success`,TESTIMONIAL_ERROR:`testimonial-error`,CALENDAR_OPEN:`calendar-open`,CALENDAR_DOWNLOAD_ICS:`calendar-download-ics`,CALENDAR_DOWNLOAD_GOOGLE:`calendar-download-google`,CTA_CLICK:`cta-click`,SOCIAL_CLICK:`social-click`,WHATSAPP_CLICK:`whatsapp-click`,EXTERNAL_LINK:`external-link`,FAQ_EXPAND:`faq-expand`,SCROLL_DEPTH:`scroll-depth`,NAV_CLICK:`nav-click`,FOOTER_LINK:`footer-link`,CONTACT_CLICK:`contact-click`};function s(){let e=[25,50,75,100],t=new Set;window.addEventListener(`scroll`,()=>{let n=document.documentElement.scrollHeight-window.innerHeight;if(n<=0)return;let r=Math.round(window.scrollY/n*100);for(let n of e)r>=n&&!t.has(n)&&(t.add(n),a(o.SCROLL_DEPTH,{depth:n,page:window.location.pathname}))},{passive:!0})}function c(){document.addEventListener(`click`,e=>{let t=e.target.closest(`a[href]`);if(!t)return;let n=t.href;if(!(!n||n.startsWith(`javascript:`)||n.startsWith(`#`)||t.hasAttribute(`data-umami-event`)))try{new URL(n).hostname!==window.location.hostname&&a(o.EXTERNAL_LINK,{url:n,text:(t.textContent??``).trim().slice(0,50)})}catch{}})}function l(){let e=document.getElementById(`newsletterForm`);e&&r(e,{onSubmit:async e=>{let t=e.get(`email`);if(!n(t))throw Error(`Bitte gib eine gültige E-Mail-Adresse ein.`);return a(o.NEWSLETTER_SUBMIT),fetch(window.routes.newsletter,{method:`POST`,headers:{"Content-Type":`application/json`,"X-CSRF-TOKEN":window.routes.csrfToken,Accept:`application/json`},body:JSON.stringify({email:t})})},onSuccess:()=>{a(o.NEWSLETTER_SUCCESS)},onError:e=>{a(o.NEWSLETTER_ERROR,{error:e.message})}})}function u(){let e=document.getElementById(`registrationForm`);e&&r(e,{onSubmit:async t=>{let r=t.get(`first_name`)?.trim(),i=t.get(`last_name`)?.trim(),s=t.get(`email`)?.trim(),c=t.get(`phone_number`)?.trim()||null,l=e.querySelector(`input[name="privacy"]`)?.checked,u=t.get(`event_id`);if(!r||!i)throw Error(`Bitte fülle alle Pflichtfelder aus.`);if(!n(s))throw Error(`Bitte gib eine gültige E-Mail-Adresse ein.`);if(!l)throw Error(`Bitte bestätige die Datenschutzerklärung.`);return a(o.EVENT_REGISTRATION_SUBMIT,{event_id:u,has_phone:c?`yes`:`no`}),fetch(window.routes.eventRegister,{method:`POST`,headers:{"Content-Type":`application/json`,"X-CSRF-TOKEN":window.routes.csrfToken,Accept:`application/json`},body:JSON.stringify({event_id:u,first_name:r,last_name:i,email:s,phone_number:c,privacy:l?1:0})})},onSuccess:()=>{a(o.EVENT_REGISTRATION_SUCCESS)},onError:e=>{a(o.EVENT_REGISTRATION_ERROR,{error:e.message})}})}function d(){let e=document.getElementById(`testimonialForm`);if(!e)return;let t=e.querySelector(`#quote`),i=document.getElementById(`charCount`);t&&i&&t.addEventListener(`input`,()=>{i.textContent=String(t.value.length)});let s=e.dataset.submitUrl??``;r(e,{onSubmit:async t=>{let r=t.get(`quote`)?.trim(),i=t.get(`author_name`)?.trim()||null,c=t.get(`role`)?.trim()||null,l=t.get(`email`)?.trim(),u=e.querySelector(`input[name="privacy"]`)?.checked;if(!r||r.length<10)throw Error(`Bitte teile deine Erfahrung mit uns (mindestens 10 Zeichen).`);if(!n(l))throw Error(`Bitte gib eine gültige E-Mail-Adresse ein.`);if(!u)throw Error(`Bitte bestätige die Datenschutzerklärung.`);return a(o.TESTIMONIAL_SUBMIT,{has_name:i?`yes`:`no`,has_role:c?`yes`:`no`,char_count:r.length}),fetch(s,{method:`POST`,headers:{"Content-Type":`application/json`,"X-CSRF-TOKEN":window.routes.csrfToken,Accept:`application/json`},body:JSON.stringify({quote:r,author_name:i,role:c,email:l,privacy:u?1:0})})},onSuccess:()=>{i&&(i.textContent=`0`),a(o.TESTIMONIAL_SUCCESS)},onError:e=>{a(o.TESTIMONIAL_ERROR,{error:e.message})}})}function f(){let e=document.getElementById(`addToCalendar`),t=document.getElementById(`calendarModal`),n=document.getElementById(`calendarICS`),r=document.getElementById(`calendarGoogle`);if(!e)return;let i=window.eventData??{title:`Männerkreis Niederbayern/ Straubing`,description:`Treffen des Männerkreis Niederbayern/ Straubing. Ein Raum für echte Begegnung unter Männern.`,location:`Straubing (genaue Adresse nach Anmeldung)`,startDate:`2025-01-24`,startTime:`19:00`,endDate:`2025-01-24`,endTime:`21:30`};if(n){let e=m(i),t=new Blob([e],{type:`text/calendar;charset=utf-8`});n.href=URL.createObjectURL(t)}r&&(r.href=h(i)),e.addEventListener(`click`,()=>{t&&(a(o.CALENDAR_OPEN,{event:i.title}),t.classList.add(`open`))}),n?.addEventListener(`click`,()=>{a(o.CALENDAR_DOWNLOAD_ICS,{event:i.title})}),r?.addEventListener(`click`,()=>{a(o.CALENDAR_DOWNLOAD_GOOGLE,{event:i.title})}),t?.addEventListener(`click`,e=>{e.target===t&&t.classList.remove(`open`)})}function p(e,t){return new Date(`${e}T${t}:00`).toISOString().replace(/[-:]/g,``).replace(/\.\d{3}/,``)}function m(e){return`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Männerkreis Niederbayern/ Straubing//DE
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
DTSTART:${p(e.startDate,e.startTime)}
DTEND:${p(e.endDate,e.endTime)}
DTSTAMP:${p(new Date().toISOString().slice(0,10),new Date().toISOString().slice(11,16))}
UID:${Date.now()}@maennerkreis-straubing.de
SUMMARY:${e.title}
DESCRIPTION:${e.description.replace(/\n/g,`\\n`)}
LOCATION:${e.location}
STATUS:CONFIRMED
END:VEVENT
END:VCALENDAR`}function h(e){let t=(e,t)=>`${e.replace(/-/g,``)}T${t.replace(`:`,``)}00`;return`https://calendar.google.com/calendar/render?${new URLSearchParams({action:`TEMPLATE`,text:e.title,dates:`${t(e.startDate,e.startTime)}/${t(e.endDate,e.endTime)}`,details:e.description,location:e.location,ctz:`Europe/Berlin`}).toString()}`}document.addEventListener(`DOMContentLoaded`,()=>{e(),t(),l(),u(),d(),f(),s(),c()});