import{i as S,n as T,r as c,t as g}from"./vendor-DOZOKNCB.js";function _(){const e=document.getElementById("navToggle"),t=document.getElementById("nav");if(!e||!t)return;const n={isOpen:!1,scrollPosition:0},o=s=>{e.setAttribute("aria-expanded",String(s)),e.setAttribute("aria-label",s?"Menü schließen":"Menü öffnen")},r=()=>{n.scrollPosition=window.scrollY,n.isOpen=!0,t.classList.add("open"),e.classList.add("active"),document.body.classList.add("nav-open"),document.body.style.top=`-${n.scrollPosition}px`,o(!0)},a=()=>{n.isOpen=!1,t.classList.remove("open"),e.classList.remove("active"),document.body.classList.remove("nav-open"),document.body.style.top="",window.scrollTo({top:n.scrollPosition,left:0,behavior:"instant"}),o(!1)},i=()=>{n.isOpen?a():r()};e.addEventListener("click",i),t.querySelectorAll(".nav__link, .nav__cta").forEach(s=>{s.addEventListener("click",()=>a())}),document.addEventListener("click",s=>{n.isOpen&&!t.contains(s.target)&&!e.contains(s.target)&&a()}),document.addEventListener("keydown",s=>{s.key==="Escape"&&n.isOpen&&a()})}function A(){const e=document.getElementById("header");if(!e)return;const t=!!document.querySelector(".hero");document.body.classList.toggle("has-hero",t),document.body.classList.toggle("no-hero",!t);const n=()=>{const o=window.scrollY>50||!t;e.classList.toggle("scrolled",o)};if(n(),window.addEventListener("scroll",n,{passive:!0}),t){const o=document.querySelector(".hero");if(!o)return;new IntersectionObserver(r=>{r.forEach(a=>{e.classList.toggle("header--on-hero",a.isIntersecting&&a.intersectionRatio>.15)})},{threshold:[0,.15,.35,.5],rootMargin:"-10% 0px 0px 0px"}).observe(o)}}var m={expand:[.22,1.2,.36,1],collapse:[.32,.72,0,1],content:[.34,1.56,.64,1],fade:[0,0,.2,1],fadeOut:[.4,0,1,1]},u={heightDuration:.5,fadeDuration:.35,contentDelay:.06};function N(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches}function I(e,t){return new Promise(n=>{const o=t.offsetHeight;t.style.opacity="0",t.style.transform="translateY(-8px)";const r=c(e,{height:["0px",`${o}px`]},{duration:u.heightDuration,ease:m.expand});c(e,{opacity:[0,1]},{duration:u.fadeDuration,ease:m.fade}),setTimeout(()=>{c(t,{opacity:[0,1]},{duration:u.fadeDuration,ease:m.fade}),c(t,{transform:["translateY(-8px)","translateY(0px)"]},{duration:u.heightDuration*.9,ease:m.content})},u.contentDelay*1e3),r.then(()=>{e.style.height="auto",n()})})}function w(e,t,n){return new Promise(o=>{const r=t.offsetHeight;t.style.height=`${r}px`,t.offsetHeight,c(n,{opacity:[1,0]},{duration:u.fadeDuration*.6,ease:m.fadeOut}),c(n,{transform:["translateY(0px)","translateY(-6px)"]},{duration:u.fadeDuration*.7,ease:m.fadeOut}),c(t,{opacity:[1,0]},{duration:u.fadeDuration,delay:u.fadeDuration*.15,ease:m.fadeOut}),c(t,{height:[`${r}px`,"0px"]},{duration:u.heightDuration*.85,ease:m.collapse}).then(()=>{e.removeAttribute("open"),t.style.height="",o()})})}function L(e){const t=e.querySelector("summary"),n=e.querySelector(".accordion-item__content, .faq-item__answer"),o=e.querySelector(".accordion-item__body, .faq-item__answer-inner");if(!t||!n||!o)return;n.setAttribute("data-accordion-content","");let r=!1;t.addEventListener("click",a=>{a.preventDefault(),!r&&(r=!0,e.open?w(e,n,o).then(()=>{r=!1}):(e.setAttribute("open",""),I(n,o).then(()=>{r=!1})))}),t.addEventListener("keydown",a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),t.click())}),e.open?(n.style.height="auto",n.style.opacity="1",o.style.opacity="1",o.style.transform="translateY(0)"):(n.style.height="0",n.style.opacity="0",o.style.opacity="0",o.style.transform="translateY(-8px)")}function C(e){const t=e.querySelector(".accordion-item__content, .faq-item__answer"),n=e.querySelector(".accordion-item__body, .faq-item__answer-inner");if(!t)return;const o=r=>{r?(t.style.height="auto",t.style.opacity="1",t.style.display="block",n&&(n.style.opacity="1",n.style.transform="none")):(t.style.height="0",t.style.opacity="0",t.style.display="none",n&&(n.style.opacity="0"))};o(e.open),e.addEventListener("toggle",()=>{o(e.open)})}function O(){const e=document.querySelectorAll(".accordion-item, .faq-item");if(e.length===0)return;const t=N();e.forEach(n=>{t?C(n):L(n)})}function h(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function R(e={}){const{threshold:t=.1,amount:n=.3}=e;document.querySelectorAll('[data-animate="fade-in"]').forEach(o=>{g(o,()=>{c(o,{opacity:[0,1],y:[20,0]},{duration:.6,easing:"ease-out"})},{amount:n})}),document.querySelectorAll('[data-animate="stagger"]').forEach(o=>{const r=o.querySelectorAll("[data-animate-item]");g(o,()=>{c(r,{opacity:[0,1],y:[20,0]},{duration:.5,delay:S(.1),easing:"ease-out"})},{amount:t})}),document.querySelectorAll('[data-animate="scale"]').forEach(o=>{g(o,()=>{c(o,{opacity:[0,1],scale:[.9,1]},{duration:.5,easing:"ease-out"})},{amount:n})})}function b(){document.querySelectorAll("[data-parallax]").forEach(e=>{T(c(e,{y:[0,-100*Number.parseFloat(e.dataset.parallax||"0.5")]}),{target:e,offset:["start end","end start"]})})}function y(e,t){const n=e.querySelector('[type="submit"]'),o=n?.textContent??"";e.addEventListener("submit",async r=>{r.preventDefault(),n&&(n.disabled=!0,n.textContent="Wird gesendet...");const a=new FormData(e);try{const i=await(await t.onSubmit(a)).json();i.success?(e.reset(),t.onSuccess?.(i),p("success",i.message)):(t.onError?.(new Error(i.message)),p("error",i.message))}catch(i){t.onError?.(i),p("error","Ein Fehler ist aufgetreten. Bitte versuche es erneut.")}finally{n&&(n.disabled=!1,n.textContent=o)}})}function p(e,t,n){const o={success:"✓",error:"✕",info:"i",warning:"!"},r={success:"Erfolg",error:"Fehler",info:"Information",warning:"Warnung"},a=document.createElement("div");a.className=`toast toast--${e}`,a.setAttribute("role","alert"),a.setAttribute("aria-live","polite");const i=document.createElement("div");i.className="toast__icon",i.textContent=o[e],i.setAttribute("aria-hidden","true");const s=document.createElement("div");s.className="toast__content";const E=document.createElement("div");E.className="toast__title",E.textContent=n??r[e];const f=document.createElement("div");f.className="toast__message",f.textContent=t,s.appendChild(E),s.appendChild(f),a.appendChild(i),a.appendChild(s),document.body.appendChild(a),c(a,{opacity:[0,1],y:[-20,0],scale:[.95,1]},{duration:.4,easing:[.16,1,.3,1]}),setTimeout(()=>{c(a,{opacity:0,y:-20,scale:.95},{duration:.3,easing:"ease-in"}).finished.then(()=>a.remove())},5e3)}function l(e,t){if(!(typeof window.umami>"u"))try{window.umami.track(e,t)}catch{}}const d={NEWSLETTER_SUBMIT:"newsletter-submit",NEWSLETTER_SUCCESS:"newsletter-success",NEWSLETTER_ERROR:"newsletter-error",EVENT_REGISTRATION_SUBMIT:"event-registration-submit",EVENT_REGISTRATION_SUCCESS:"event-registration-success",EVENT_REGISTRATION_ERROR:"event-registration-error",TESTIMONIAL_SUBMIT:"testimonial-submit",TESTIMONIAL_SUCCESS:"testimonial-success",TESTIMONIAL_ERROR:"testimonial-error",CALENDAR_OPEN:"calendar-open",CALENDAR_DOWNLOAD_ICS:"calendar-download-ics",CALENDAR_DOWNLOAD_GOOGLE:"calendar-download-google",CTA_CLICK:"cta-click",SOCIAL_CLICK:"social-click",WHATSAPP_CLICK:"whatsapp-click",EXTERNAL_LINK:"external-link",FAQ_EXPAND:"faq-expand",SCROLL_DEPTH:"scroll-depth"};function v(){const e=document.getElementById("newsletterForm");e&&y(e,{onSubmit:async t=>{const n=t.get("email");if(!h(n))throw new Error("Bitte gib eine gültige E-Mail-Adresse ein.");return l(d.NEWSLETTER_SUBMIT),fetch(window.routes.newsletter,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":window.routes.csrfToken,Accept:"application/json"},body:JSON.stringify({email:n})})},onSuccess:()=>{l(d.NEWSLETTER_SUCCESS)},onError:t=>{l(d.NEWSLETTER_ERROR,{error:t.message})}})}function D(){const e=document.getElementById("registrationForm");e&&y(e,{onSubmit:async t=>{const n=t.get("first_name")?.trim(),o=t.get("last_name")?.trim(),r=t.get("email")?.trim(),a=t.get("phone_number")?.trim()||null,i=e.querySelector('input[name="privacy"]')?.checked,s=t.get("event_id");if(!n||!o)throw new Error("Bitte fülle alle Pflichtfelder aus.");if(!h(r))throw new Error("Bitte gib eine gültige E-Mail-Adresse ein.");if(!i)throw new Error("Bitte bestätige die Datenschutzerklärung.");return l(d.EVENT_REGISTRATION_SUBMIT,{event_id:s,has_phone:a?"yes":"no"}),fetch(window.routes.eventRegister,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":window.routes.csrfToken,Accept:"application/json"},body:JSON.stringify({event_id:s,first_name:n,last_name:o,email:r,phone_number:a,privacy:i?1:0})})},onSuccess:()=>{l(d.EVENT_REGISTRATION_SUCCESS)},onError:t=>{l(d.EVENT_REGISTRATION_ERROR,{error:t.message})}})}function M(){const e=document.getElementById("testimonialForm");if(!e)return;const t=e.querySelector("#quote"),n=document.getElementById("charCount");t&&n&&t.addEventListener("input",()=>{n.textContent=String(t.value.length)});const o=e.dataset.submitUrl??"";y(e,{onSubmit:async r=>{const a=r.get("quote")?.trim(),i=r.get("author_name")?.trim()||null,s=r.get("role")?.trim()||null,E=r.get("email")?.trim(),f=e.querySelector('input[name="privacy"]')?.checked;if(!a||a.length<10)throw new Error("Bitte teile deine Erfahrung mit uns (mindestens 10 Zeichen).");if(!h(E))throw new Error("Bitte gib eine gültige E-Mail-Adresse ein.");if(!f)throw new Error("Bitte bestätige die Datenschutzerklärung.");return l(d.TESTIMONIAL_SUBMIT,{has_name:i?"yes":"no",has_role:s?"yes":"no",char_count:a.length}),fetch(o,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":window.routes.csrfToken,Accept:"application/json"},body:JSON.stringify({quote:a,author_name:i,role:s,email:E,privacy:f?1:0})})},onSuccess:()=>{n&&(n.textContent="0"),l(d.TESTIMONIAL_SUCCESS)},onError:r=>{l(d.TESTIMONIAL_ERROR,{error:r.message})}})}function x(){const e=document.getElementById("addToCalendar"),t=document.getElementById("calendarModal"),n=document.getElementById("calendarICS"),o=document.getElementById("calendarGoogle");if(!e)return;const r=window.eventData??{title:"Männerkreis Niederbayern/ Straubing",description:"Treffen des Männerkreis Niederbayern/ Straubing. Ein Raum für echte Begegnung unter Männern.",location:"Straubing (genaue Adresse nach Anmeldung)",startDate:"2025-01-24",startTime:"19:00",endDate:"2025-01-24",endTime:"21:30"};e.addEventListener("click",()=>{if(t){if(l(d.CALENDAR_OPEN,{event:r.title}),t.classList.add("open"),n){const a=B(r),i=new Blob([a],{type:"text/calendar;charset=utf-8"});n.href=URL.createObjectURL(i)}o&&(o.href=k(r))}}),n&&n.addEventListener("click",()=>{l(d.CALENDAR_DOWNLOAD_ICS,{event:r.title})}),o&&o.addEventListener("click",()=>{l(d.CALENDAR_DOWNLOAD_GOOGLE,{event:r.title})}),t&&t.addEventListener("click",a=>{a.target===t&&t.classList.remove("open")})}function B(e){const t=(n,o)=>new Date(`${n}T${o}:00`).toISOString().replace(/[-:]/g,"").replace(/\.\d{3}/,"");return`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Männerkreis Niederbayern/ Straubing//DE
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
DTSTART:${t(e.startDate,e.startTime)}
DTEND:${t(e.endDate,e.endTime)}
DTSTAMP:${new Date().toISOString().replace(/[-:]/g,"").replace(/\.\d{3}/,"")}
UID:${Date.now()}@maennerkreis-straubing.de
SUMMARY:${e.title}
DESCRIPTION:${e.description.replace(/\n/g,"\\n")}
LOCATION:${e.location}
STATUS:CONFIRMED
END:VEVENT
END:VCALENDAR`}function k(e){const t=(n,o)=>`${n.replace(/-/g,"")}T${o.replace(":","")}00`;return`https://calendar.google.com/calendar/render?${new URLSearchParams({action:"TEMPLATE",text:e.title,dates:`${t(e.startDate,e.startTime)}/${t(e.endDate,e.endTime)}`,details:e.description,location:e.location,ctz:"Europe/Berlin"}).toString()}`}document.addEventListener("DOMContentLoaded",()=>{_(),A(),O(),v(),D(),M(),x(),R({threshold:.1,amount:.3}),b()});
