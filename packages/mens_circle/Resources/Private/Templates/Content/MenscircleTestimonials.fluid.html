<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">
<f:variable name="maxItems" value="{f:if(condition: flexFormData.settings.limit, then: flexFormData.settings.limit, else: 6)}" />

<section class="section section--lg testimonials-section" id="stimmen" aria-labelledby="testimonials-title">
    <div class="container">
        <div class="testimonials__header fade-in">
            <p class="eyebrow">
                <f:if condition="{data.subheader}">
                    <f:then>{data.subheader}</f:then>
                    <f:else>Community Stimmen</f:else>
                </f:if>
            </p>

            <h2 class="section-title testimonials__title" id="testimonials-title">
                <f:if condition="{data.header}">
                    <f:then>
                        <f:format.raw>{data.header}</f:format.raw>
                    </f:then>
                    <f:else>Was <span class="highlight">Teilnehmer</span> sagen</f:else>
                </f:if>
            </h2>

            <p class="testimonials__subtitle">
                <f:if condition="{data.bodytext}">
                    <f:then>{data.bodytext -> f:format.stripTags()}</f:then>
                    <f:else>Authentische Einblicke von MÃ¤nnern, die den Kreis erleben.</f:else>
                </f:if>
            </p>
        </div>

        <f:if condition="{testimonials}">
            <f:then>
                <div class="testimonials__grid stagger-children">
                    <f:for each="{testimonials}" as="testimonial" iteration="iterator">
                        <f:if condition="{iterator.cycle <= maxItems}">
                            <div class="testimonial-card">
                                <div class="testimonial-card__quote-icon" aria-hidden="true">
                                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M10 16C10 13.7909 8.20914 12 6 12V8C10.4183 8 14 11.5817 14 16V22C14 23.1046 13.1046 24 12 24H8C6.89543 24 6 23.1046 6 22V18C6 16.8954 6.89543 16 8 16H10ZM24 16C24 13.7909 22.2091 12 20 12V8C24.4183 8 28 11.5817 28 16V22C28 23.1046 27.1046 24 26 24H22C20.8954 24 20 23.1046 20 22V18C20 16.8954 20.8954 16 22 16H24Z" fill="currentColor"/>
                                    </svg>
                                </div>

                                <blockquote class="testimonial-card__quote">{testimonial.quote}</blockquote>

                                <f:if condition="{testimonial.author_name}">
                                    <div class="testimonial-card__author">
                                        <cite class="testimonial-card__name">{testimonial.author_name}</cite>
                                        <f:if condition="{testimonial.role}">
                                            <span class="testimonial-card__role">{testimonial.role}</span>
                                        </f:if>
                                    </div>
                                </f:if>
                                <f:if condition="{testimonial.authorName}">
                                    <div class="testimonial-card__author">
                                        <cite class="testimonial-card__name">{testimonial.authorName}</cite>
                                        <f:if condition="{testimonial.role}">
                                            <span class="testimonial-card__role">{testimonial.role}</span>
                                        </f:if>
                                    </div>
                                </f:if>
                            </div>
                        </f:if>
                    </f:for>
                </div>
            </f:then>
            <f:else>
                <p class="text-center text-muted">
                    <f:if condition="{flexFormData.settings.emptyMessage}">
                        <f:then>{flexFormData.settings.emptyMessage}</f:then>
                        <f:else>Aktuell sind noch keine Erfahrungsberichte freigegeben.</f:else>
                    </f:if>
                </p>
            </f:else>
        </f:if>
    </div>
</section>
</html>
